/*!
 *	 Angular Smooth Scroll (ngSmoothScroll)
 *	 Animates scrolling to elements, by David Oliveros.
 *
 *   Callback hooks contributed by Ben Armston https://github.com/benarmston
 *	 Easing support contributed by Willem Liu. https://github.com/willemliu
 *	 Easing functions forked from GaÃ«tan Renaudeau. https://gist.github.com/gre/1650294
 *	 Infinite loop bugs in iOS and Chrome (when zoomed) by Alex Guzman. https://github.com/alexguzman
 *	 Support for scrolling in custom containers by Joseph Matthias Goh. https://github.com/zephinzer
 *	 Influenced by Chris Ferdinandi
 *	 https://github.com/cferdinandi
 *
 *	 Version: 2.0.1
 * 	 License: MIT
 */
(function(){"use strict";var module=angular.module("smoothScroll",[]);var smoothScroll=function(element,options){options=options||{};var duration=options.duration||800,offset=options.offset||0,easing=options.easing||"easeInOutQuart",callbackBefore=options.callbackBefore||function(){},callbackAfter=options.callbackAfter||function(){},container=document.getElementById(options.containerId)||null,containerPresent=container!=undefined&&container!=null;var getScrollLocation=function(){if(containerPresent){return container.scrollTop}else{if(window.pageYOffset){return window.pageYOffset}else{return document.documentElement.scrollTop}}};var getEasingPattern=function(type,time){switch(type){case"easeInQuad":return time*time;case"easeOutQuad":return time*(2-time);case"easeInOutQuad":return time<.5?2*time*time:-1+(4-2*time)*time;case"easeInCubic":return time*time*time;case"easeOutCubic":return--time*time*time+1;case"easeInOutCubic":return time<.5?4*time*time*time:(time-1)*(2*time-2)*(2*time-2)+1;case"easeInQuart":return time*time*time*time;case"easeOutQuart":return 1- --time*time*time*time;case"easeInOutQuart":return time<.5?8*time*time*time*time:1-8*--time*time*time*time;case"easeInQuint":return time*time*time*time*time;case"easeOutQuint":return 1+--time*time*time*time*time;case"easeInOutQuint":return time<.5?16*time*time*time*time*time:1+16*--time*time*time*time*time;default:return time}};var getEndLocation=function(element){var location=0;if(element.offsetParent){do{location+=element.offsetTop;element=element.offsetParent}while(element)}location=Math.max(location-offset,0);return location};setTimeout(function(){var currentLocation=null,startLocation=getScrollLocation(),endLocation=getEndLocation(element),timeLapsed=0,distance=endLocation-startLocation,percentage,position,scrollHeight,internalHeight;var stopAnimation=function(){currentLocation=getScrollLocation();if(containerPresent){scrollHeight=container.scrollHeight;internalHeight=container.clientHeight+currentLocation}else{scrollHeight=document.body.scrollheight;internalHeight=window.innerHeight+currentLocation}if(position==endLocation||currentLocation==endLocation||internalHeight>scrollHeight){clearInterval(runAnimation);callbackAfter(element)}};var animateScroll=function(){timeLapsed+=16;percentage=timeLapsed/duration;percentage=percentage>1?1:percentage;position=startLocation+distance*getEasingPattern(easing,percentage);if(containerPresent){container.scrollTop=position}else{window.scrollTo(0,position)}stopAnimation()};callbackBefore(element);var runAnimation=setInterval(animateScroll,16)},0)};module.factory("smoothScroll",function(){return smoothScroll});module.directive("smoothScroll",["smoothScroll",function(smoothScroll){return{restrict:"A",scope:{callbackBefore:"&",callbackAfter:"&"},link:function($scope,$elem,$attrs){if(typeof $attrs.scrollIf==="undefined"||$attrs.scrollIf==="true"){setTimeout(function(){var callbackBefore=function(element){if($attrs.callbackBefore){var exprHandler=$scope.callbackBefore({element:element});if(typeof exprHandler==="function"){exprHandler(element)}}};var callbackAfter=function(element){if($attrs.callbackAfter){var exprHandler=$scope.callbackAfter({element:element});if(typeof exprHandler==="function"){exprHandler(element)}}};smoothScroll($elem[0],{duration:$attrs.duration,offset:$attrs.offset,easing:$attrs.easing,callbackBefore:callbackBefore,callbackAfter:callbackAfter,containerId:$attrs.containerId})},0)}}}}]);module.directive("scrollTo",["smoothScroll",function(smoothScroll){return{restrict:"A",scope:{callbackBefore:"&",callbackAfter:"&"},link:function($scope,$elem,$attrs){var targetElement;$elem.on("click",function(e){e.preventDefault();targetElement=document.getElementById($attrs.scrollTo);if(!targetElement)return;var callbackBefore=function(element){if($attrs.callbackBefore){var exprHandler=$scope.callbackBefore({element:element});if(typeof exprHandler==="function"){exprHandler(element)}}};var callbackAfter=function(element){if($attrs.callbackAfter){var exprHandler=$scope.callbackAfter({element:element});if(typeof exprHandler==="function"){exprHandler(element)}}};smoothScroll(targetElement,{duration:$attrs.duration,offset:$attrs.offset,easing:$attrs.easing,callbackBefore:callbackBefore,callbackAfter:callbackAfter,containerId:$attrs.containerId});return false})}}}])})();